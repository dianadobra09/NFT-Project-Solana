"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t=require("react"),o=(e=t)&&"object"==typeof e&&"default"in e?e.default:e,r="https://embed.cloudflarestream.com/embed/sdk.latest.js",n=function(){if("undefined"!=typeof window)return window.Stream};function a(){var e=t.useState(n),o=e[0],a=e[1];return t.useEffect((function(){if(!o){var e=document.querySelector("script[src='"+r+"']"),t=null!=e?e:document.createElement("script");t.addEventListener("load",(function(){a(n)})),e||(t.src=r,document.head.appendChild(t))}}),[o]),o}function i(e,o,r){t.useEffect((function(){o.current&&(o.current[e]=r)}),[e,r,o])}function d(e,o,r){void 0===r&&(r=l),t.useEffect((function(){if(o.current){var t=o.current;return t.addEventListener(e,r),function(){return t.removeEventListener(e,r)}}}),[r,e,o])}var l=function(){},u={position:"absolute",top:0,left:0,right:0,bottom:0,height:"100%",width:"100%"},s=function(e){var r=e.children,n=e.responsive,a=e.className,i=e.videoDimensions,d=i.videoHeight,l=i.videoWidth,u=t.useMemo((function(){return{position:"relative",paddingTop:l>0?d/l*100+"%":void 0}}),[l,d]);return o.createElement("div",{className:a,style:n?u:void 0},r)},c=function(e){var r=e.src,a=e.adUrl,l=e.controls,c=void 0!==l&&l,m=e.muted,p=void 0!==m&&m,f=e.autoplay,v=void 0!==f&&f,h=e.loop,g=void 0!==h&&h,y=e.preload,C=void 0===y?"metadata":y,T=e.primaryColor,S=e.letterboxColor,E=e.defaultTextTrack,b=e.height,x=e.width,w=e.poster,R=e.currentTime,U=void 0===R?0:R,k=e.volume,W=void 0===k?1:k,L=e.startTime,P=e.streamRef,D=e.responsive,H=void 0===D||D,j=e.className,I=e.title,A=e.onAbort,M=e.onCanPlay,N=e.onCanPlayThrough,q=e.onDurationChange,z=e.onEnded,B=e.onError,O=e.onLoadedData,_=e.onLoadedMetaData,F=e.onLoadStart,K=e.onPause,V=e.onPlay,G=e.onPlaying,J=e.onProgress,Q=e.onRateChange,X=e.onResize,Y=e.onSeeked,Z=e.onSeeking,$=e.onStalled,ee=e.onSuspend,te=e.onTimeUpdate,oe=e.onVolumeChange,re=e.onWaiting,ne=e.onStreamAdStart,ae=e.onStreamAdEnd,ie=e.onStreamAdTimeout,de=t.useRef(),le=null!=P?P:de,ue=t.useState({videoHeight:0,videoWidth:0}),se=ue[0],ce=ue[1],me=t.useRef(null),pe=function(e,o){var r=o.muted,n=o.preload,a=o.loop,i=o.autoplay,d=o.controls,l=o.poster,u=o.primaryColor,s=o.letterboxColor,c=o.adUrl,m=o.startTime,p=o.defaultTextTrack,f=[l&&"poster="+encodeURIComponent(l),c&&"ad-url="+encodeURIComponent(c),p&&"defaultTextTrack="+encodeURIComponent(p),u&&"primaryColor="+encodeURIComponent(u),s&&"letterboxColor="+encodeURIComponent(s),m&&"startTime="+m,r&&"muted=true",n&&"preload="+n,a&&"loop=true",i&&"autoplay=true",!d&&"controls=false"].filter(Boolean).join("&");return t.useMemo((function(){return"https://iframe.cloudflarestream.com/"+e+"?"+f}),[])}(r,{muted:p,preload:C,loop:g,autoplay:v,controls:c,poster:w,primaryColor:T,letterboxColor:S,adUrl:a,defaultTextTrack:E,startTime:L}),fe=function(e){try{var t=new URL(e);return t.hostname.endsWith("videodelivery.net")||t.hostname.endsWith("cloudflarestream.com")}catch(e){return!1}}(r)?r:pe;return i("muted",le,p),i("controls",le,c),i("src",le,r),i("autoplay",le,v),i("currentTime",le,U),i("loop",le,g),i("preload",le,C),i("primaryColor",le,T),i("letterboxColor",le,S),i("volume",le,W),t.useEffect((function(){var e=n();if(me.current&&e){var t=e(me.current);le.current=t;var o=t.videoHeight,r=t.videoWidth;o&&r&&ce({videoHeight:o,videoWidth:r})}}),[]),d("abort",le,A),d("canplay",le,M),d("canplaythrough",le,N),d("durationchange",le,q),d("ended",le,z),d("error",le,B),d("loadeddata",le,O),d("loadedmetadata",le,_),d("loadstart",le,F),d("pause",le,K),d("play",le,V),d("playing",le,G),d("progress",le,J),d("ratechange",le,Q),d("seeked",le,Y),d("seeking",le,Z),d("stalled",le,$),d("suspend",le,ee),d("timeupdate",le,te),d("volumechange",le,oe),d("waiting",le,re),d("stream-adstart",le,ne),d("stream-adend",le,ae),d("stream-adtimeout",le,ie),d("resize",le,(function(e){if(le.current){var t=le.current;ce({videoHeight:t.videoHeight,videoWidth:t.videoWidth}),X&&X(e)}})),o.createElement(s,{className:j,responsive:H,videoDimensions:se},o.createElement("iframe",{ref:me,src:fe,title:I,style:H?u:void 0,frameBorder:0,height:b,width:x,allow:"accelerometer; gyroscope; autoplay; encrypted-media; picture-in-picture;",allowFullScreen:!0}))};exports.Stream=function(e){return a()?o.createElement(c,Object.assign({},e)):null},exports.useStreamSDK=a;
//# sourceMappingURL=stream-react.cjs.production.min.js.map
